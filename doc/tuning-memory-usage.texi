The default configuration of Enfuse assumes a system with 3--4@dmn{GB}
of @acronym{RAM}.

@cindex @code{ENBLEND_CACHE_IMAGES} (preprocessor symbol)
If Enfuse has been compiled with the C++-preprocessor symbol
@code{ENBLEND_CACHE_IMAGES} it uses its own image cache, whose size is
user configurable with the option @samp{-m @var{CACHE-SIZE}}
(@pxref{Extended Options}).  Furthermore, option @samp{-b
@var{BUFFER-SIZE}} (@pxref{Extended Options}) allows for fine-tuning
the size of a single buffer inside the image cache.  Note that
@var{CACHE-SIZE} is given in megabytes, whereas @var{BUFFER-SIZE} is
given in kilobytes.

Usually the user lets the operating system take care of the memory
management of all processes.  However, a user of Enfuse might want to
control the balance between the operating systems' Virtual Memory
System and Enfuse's image cache for several reasons.

@itemize
@item
Paging in or out parts of a process' image runs at kernel level and
thus can make user processes appear unresponsive or ``jumpy''.  The
caching mechanism of Enfuse of course runs as a user process, which is
why it has less detrimental effects on the system's overall
responsiveness.

@item
Enfuse's image cache has been optimized for accesses to image data.
And all algorithms in Enfuse have been carefully arranged to play nice
with the image cache.  An operating system's cache has no knowledge of
these particular memory access patterns.

@item
The disk access of the operating system to the swap device has been
highly optimized.  Enfuse on the other hand uses the standard
@acronym{IO}-layer which is a slower interface.

@item
Limiting the amount of image cache prevents Enfuse from eating up most
or all @acronym{RAM}, thereby forcing all user applications into the
swap device.
@end itemize

@noindent
The @var{CACHE-SIZE} should be set in a way as to reconcile all of the
above aspects even for the biggest data sets (this is many images and
large images).

@ref{Table:cache-size-settings} suggestes some cache- and buffer-sizes
for different amounts of available @acronym{RAM}.

@float Table,Table:cache-size-settings
@ifinfo
@example
 @acronym{RAM}  | @var{CACHE-SIZE} | @var{BUFFER-SIZE} | Comment
 MB   |     MB     |     KB      |
------+------------+-------------+---------
 4096 | 1024       | 2048        | default
 2048 | 512--1024  | 1024        |
 1024 | 256--512   | 256--512    |
@end example
@end ifinfo
@html
<table border="1">
    <tr>
        <th>RAM</th>
        <th><i>CACHE-SIZE</i></th>
        <th><i>BUFFER-SIZE</i></th>
        <th>Comment</th>
    </tr>
    <tr>
        <th>MB</th>
        <th>MB</th>
        <th>KB</th>
        <th></th>
    </tr>
    <tr>
        <td>4096</td>
        <td>1024</td>
        <td>2048</td>
        <td>default</td>
    </tr>
    <tr>
        <td>2048</td>
        <td>512&ndash;1024</td>
        <td>1024</td>
        <td></td>
    </tr>
    <tr>
        <td>1024</td>
        <td>256&ndash;512</td>
        <td>256&ndash;512</td>
        <td></td>
    </tr>
</table>
@end html
@tex
{
    \vskip0.5\baselineskip
    \offinterlineskip
    \halign{
        \indent\strut\hfil#\hfil&
        \quad\vrule#&
        \quad\hfil#\hfil&
        \quad\vrule#&
        \quad\hfil#\hfil&
        \quad\vrule#&
        \quad#\hfil\cr
        \bf RAM && \bf CACHE-SIZE && \bf BUFFER-SIZE && \bf Comment \cr
        \bf MB  && \bf MB         && \bf KB          && \cr\noalign{\hrule}
        \omit   &\vrule height.667ex width0pt& \omit          && \omit           && \cr
        4096    && 1024           && 2048            && default \cr
        2048    && 512--1024      && 1024            && \cr
        1024    && 256--512       && 256--512        && \cr
    }
}
@end tex
@caption{Suggested cache-size settings}
@c @shortcaption{}
@end float
