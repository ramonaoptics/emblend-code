%% This file is part of Enblend.
%% Licence details can be found in the file COPYING.


\section[Interacting with \App\commonpart]{Interacting with \App\commonpart
  \label{sec:interaction}
  \genidx[\rangebeginlocation]{interaction with \App}}

This section explains how to find out about the inner workings of
\emph{your} version of \App{} whithout looking at its source code.
And it states how to interact with \App{} besides passing command-line
options and image filenames.


\subsection[Finding Out Details]{Finding Out Details About \app
  \label{sec:finding-out-details}
  \genidx{detailed configuration}}

An \appcmd{} binary can come in several configurations.  Now, the
exact name of the binary may vary and may or may not reflect the
``kind of \app''.  Therefore, \appcmd{} supplies several options that
allow the user to query exactly

\begin{tabular}{@{--\hspace{.667\tabcolsep}} p{.3\linewidth} @{\extracolsep{2em}} p{.3\linewidth} @{\extracolsep{2\tabcolsep}} l}
  \multicolumn{1}{c}{} &
  \multicolumn{1}{l}{\emph{Option\/\ldots}} &
  \multicolumn{1}{l}{\emph{Description\/\ldots}} \\
  %%\cline{2-3}\extraheadingsep
  what its exact version number is, &
  \flexipageref{\option{--version}}{opt:version} &
  Sec.~\fullref{sec:exact-version} \\
  what features it does support, &
  \flexipageref{\option{--version}}{opt:version} and \flexipageref{\option{--verbose}}{opt:verbose} &
  Sec.~\fullref{sec:compiled-in-features} \\
  which image formats it can read and write without the need of conversion, &
  \flexipageref{\option{--show-image-formats}}{opt:show-image-formats} &
  Sec.~\fullref{sec:image-formats} \\
  who built it, &
  \flexipageref{\option{--show-signature}}{opt:show-signature} &
  Sec.~\fullref{sec:name-of-builder} \\
  and what compiler and libraries were used to do so. &
  \flexipageref{\option{--show-software-components}}{opt:show-software-components} &
  Sec.~\fullref{sec:compiler-and-libraries}
\end{tabular}

\noindent They are explained in the following sections.

\subsubsection[Exact Version]{Exact Version Number
  \label{sec:exact-version}
  \genidx{software!version}
  \genidx{query!version}
  \optidx{--version}}

Example~\ref{ex:option-version} shows a possible output of
\sample{\app{} --version}.  The version number at the beginning of the
text tells about the \emph{exact} version of the binary.  It is this
number you can compare with the version number of this document, which
is, by the way, \val{val:VERSION} in which the slightly cranky markup
(see \flexipageref{Notation}{sec:notation}) dispels copy-paste errors.

\begin{exemplar}[htbp]
  \centering
  \begin{terminal}
    \$ \app{} --version \\
    \app{} 4.2-02c1f45857b4 \\
    ~ \\
    Copyright (C) 2004-2009 Andrew Mihal. \\
    Copyright (C) 2009-2015 Christoph Spiel. \\
    ~ \\
    License GPLv2+: GNU GPL version 2 or later <http://www.gnu.org/licenses/gpl.html> \\
    This is free software: you are free to change and redistribute it. \\
    There is NO WARRANTY, to the extent permitted by law. \\
    ~ \\
    Written by Andrew Mihal, Christoph Spiel and others.
  \end{terminal}

  \caption[Output of \sample{\app{} --version}]%
          {Example output of \appcmd{} when called with
            option~\option*{--version}.\label{ex:option-version}}
\end{exemplar}

The version indicator consist of a two (major and minor version) or
three (major and minor version plus patch-level) numbers separated by
dots and an optional hexadecimal identifier.  Binaries from the
``Development Branch''\genidx{branches of \App\slash\OtherApp!development}%
\gensee{development branch}{branches, development} are assigned two part
version numbers, whereas a threep part version number is reserved for
the ``Stable Branch''\genidx{branches of \App\slash\OtherApp!stable}%
\gensee{stable branch}{branches, stable} of development.  Officially
released versions lack the hexadecimal identifier.  Examples:

\begin{codelist}
\item[4.1.3-0a816672d475]\itemend Some un-released version from the
  ``Stable Branch'', which finally will lead to version~4.1.3.

\item[4.1.3]\itemend Officially released version~4.1.3 in the ``Stable
  Branch''.

\item[4.2-1e4d237daabf]\itemend Some un-released version from the
  ``Development Branch'', which finally will lead to version~4.2.

\item[4.2]\itemend Officially released version~4.2 in the
  ``Development Branch''.
\end{codelist}

Matching the version codes is the only reliably way to match a given
binary with its manual page (``manual page for
enblend~4.2-1e4d237daabf'') and its documentation.  This document at
least mentions the version code on its title page and the
\flexipageref{abstract}{sec:abstract}.

The twelve-digit hexadeximal \metavar{ID-CODE} is automatically
generated by our source-code versioning system,
\uref{\mercurialseleniccom}{Mercurial}.  You can use the
\metavar{ID-CODE} to look up the version on the web in our
\uref{\enblendhgcodesfnet}{public source code repository} or, if you
have cloned the project to your own workspace, with the command
\begin{literal}
  hg log --verbose --rev \metavar{ID-CODE}
\end{literal}


\subsubsection[Compiled-In Features]{Compiled-In Features
  \label{sec:compiled-in-features}
  \genidx{features}
  \genidx{query!features}
  \optidx{--version}
  \optidx{--verbose}}

Adding option~\option{--verbose} to~\option{--version} will reproduce
the information described in the previous section plus a list of
``extra features''.  Any unavailable feature in the particular
binary queried returns
\begin{literal}
  Extra feature: \dots: no
\end{literal}
whereas available feature answer ``\code{yes}'' followed by a detailed
report on the feature and its connection to some library or specific
hardware.  Example~\fullref{ex:option-version-verbose} shows such a
report; remember that your binary may include more or less of the
features displayed there.

\begin{exemplar}[htbp]
  \begin{maxipage}
    \centering
    \begin{terminal}
      \$ \app{} --version --verbose \\
      \app{} 4.2-02f8a3f3fff3 \\
      ~ \\
      Extra feature: dmalloc support: no \\
      Extra feature: Cilk: yes \\
      ~~- version 2.0 \\
      ~~- "\_Cilk\_for" keyword not implemented \\
      Extra feature: OpenMP: yes \\
      ~~- version 2013-7 \\
      ~~- support for dynamic adjustment of the number of threads; \\
      ~~~~dynamic adjustment disabled by default \\
      ~~- using 4 processors and up to 4 threads \\
      ~~- allocating thread-local dynamic memory with malloc/free \\
      Extra feature: OpenCL: yes \\
      ~~- Platform \#1: Advanced Micro Devices, Inc., \bslash \\
      ~~~~~~~~~~~~~~~~AMD Accelerated Parallel Processing, \bslash \\
      ~~~~~~~~~~~~~~~~OpenCL 1.2 AMD-APP (938.2) \\
      ~~~~* no GPU devices found on this platform \\
      ~~- Platform \#2: NVIDIA Corporation, NVIDIA CUDA, OpenCL 1.1 CUDA 4.2.1 \\
      ~~~~* Device \#1: max. 1024 work-items \\
      ~~~~~~~~~~~~~~~~~1047872 KB global memory with 32 KB read/write cache \\
      ~~~~~~~~~~~~~~~~~48 KB dedicated local memory \\
      ~~~~~~~~~~~~~~~~~64 KB maximum constant memory \\
      ~~Search path (expanding ENBLEND\_OPENCL\_PATH and appending built-in path) \\
      ~~~~/usr/local/share/enblend/kernels:/usr/share/enblend/kernels \\
      ~ \\
      Copyright (C) 2004-2009 Andrew Mihal. \\
      Copyright (C) 2009-2015 Christoph Spiel. \\
      ~ \\
      License GPLv2+: GNU GPL version 2 or later <http://www.gnu.org/licenses/gpl.html> \\
      This is free software: you are free to change and redistribute it. \\
      There is NO WARRANTY, to the extent permitted by law. \\
      ~ \\
      Written by Andrew Mihal, Christoph Spiel and others.
    \end{terminal}
  \end{maxipage}

  \caption[Output of \sample{\app{} --version --verbose}]%
           {Example output of \appcmd{} when called with options
            \option*{--version} and~\option*{--verbose}
            together.\label{ex:option-version-verbose}}
\end{exemplar}

The \sample{--version --verbose}~combo is one of the first things test
if \appcmd{} ``suddenly'' behaves strangely.

\begin{exemplar}[htbp]
  \centering
  \begin{tabular}{@{--\hspace{.667\tabcolsep}} p{.45\linewidth} p{.45\linewidth}}
    \hline
    \multicolumn{1}{c|}{Question/Problem} & \multicolumn{1}{c}{Hint} \\
    \hline\extraheadingsep
    ``I'm running my \appcmd{} on a multicore system, but it does not make use of it.'' &
        {\raggedright Check for extra feature \acronym{OpenMP}.} \\\extraheadingsep
        ``My \appcmd{} complains when I call it with \sample{--gpu}!'' &
        {\raggedright Check for extra feature \acronym{OpenCL}.} \\\extraheadingsep
        ``\appcmd{} is so slow!'' &
        Ensure that \emph{neither} feature \code{mmap-view}
        \emph{nor} \code{image-cache} has been compiled in. \\\extraheadingsep
        ``\appcmd{} eats away too much memory!  Can I tell it to
        unload that onto the disk?'' &
        No, there is no command-line switch for that, but you can use
        a version with \code{mmap-view}~feature. \\\extraheadingsep
        My \appcmd{} has \acronym{OpenMP} enabled.  Does it support
        dynamic adjustment of the number of threads? &
        Under extra feature \acronym{OpenMP} look for ``support for
        dynamic adjustment of the number of threads''. \\\extraheadingsep
        My \appcmd{} has \acronym{OpenCL} enabled.  Does it need
        separate \acronym{OpenCL} source files? &
        Under extra feature \acronym{OpenCL} look for ``Search
        path''.  If there is none, all sources have been included in
        the binary, otherwise the \acronym{OpenCL} source files
        should be put somewhere on the \acronym{OpenCL} search path.
  \end{tabular}

  \caption[Questions answered by \sample{\app{} --version --verbose}]%
          {Some questions that calling \appcmd{} with the option pair
            \option*{--version} and~\option*{--verbose} can
            answer.\label{ex:qanda-option-version-verbose}}

\end{exemplar}


\subsubsection[Image Formats]{Supported Images Formats
  \label{sec:image-formats}
  \genidx{image formats}
  \genidx{query!image formats}
  \optidx{--show-image-formats}}

\App{} can read and write a fixed set of image formats if it was
compiled to support them.  For example the \acronym{EXR}-format
requires special support libraries.  Use
option~\option{--show-image-formats} to find out

\begin{itemize}
\item what image-data formats are supported,
\item what filename-extensions are recognized, and
\item what per-channel depths have been compiled into your \appcmd{}
  binary.
\end{itemize}

\noindent The only three image formats that are always supported are
\begin{itemize}
\item \acronym{JPEG},
\item \acronym{PNG}, and
\item \acronym{TIFF}.
\end{itemize}

\noindent All others are optional.  In particular the high-dynamic
range (\acronym{HDR}) format \acronym{OpenEXR} only gets compiled, if
several non-standard libraries are available.

The provided per-channel depths range from just one, namely ``8~bits
unsigned integral'' (\code{uint8}) up to seven:
  \begin{itemize}
  \item 8~bits unsigned integral -- \sample{uint8}
  \item 16~bits unsigned or signed integral -- \sample{uint16} or \sample{int16}
  \item 32~bits unsigned or signed integral -- \sample{uint32} or \sample{int32}
  \item 32~bits floating-point -- \sample{float}
  \item 64~bits floating-point -- \sample{double}
  \end{itemize}

  Table~\ref{tab:image-format-and-bit-depth} summarizes the channel
  bit depths of some prominent image formats.

  %% With the exception of TIFF, VIFF, PNG, and PNM all file types
  %% store only 1 byte (gray scale and mapped RGB) or 3 bytes (RGB)
  %% per pixel.
  %%
  %% PNG can store UInt8 and UInt16 values, and supports 1 and 3
  %% channel images. One additional alpha channel is also supported.
  %%
  %% PNM can store 1 and 3 channel images with UInt8, UInt16 and
  %% UInt32 values in each channel.
  %%
  %% TIFF and VIFF are additionally able to store short and long
  %% integers (2 or 4 bytes) and real values (32 bit float and 64 bit
  %% double) without conversion.
  \begin{table}[htbp]
    \ifreferencemanual\begin{maxipage}\fi
    \centering
    \begin{tabular}{l cc ccccc}
      \hline
      \multicolumn{1}{c|}{} &
      \multicolumn{1}{c|}{} &
      \multicolumn{1}{c|}{} &
      \multicolumn{5}{c}{Channel Bit-Depth} \\
      \cline{4-8}

      \multicolumn{1}{c|}{Format} &
      \multicolumn{1}{c|}{Mask} &
      \multicolumn{1}{c|}{Profile} &
      \multicolumn{3}{c|}{Integral} &
      \multicolumn{2}{c}{Floating-Point} \\
      \cline{4-8}

      \multicolumn{1}{c|}{} &
      \multicolumn{1}{c|}{} &
      \multicolumn{1}{c|}{} &
      \multicolumn{1}{c|}{\code{uint8}} &
      \multicolumn{1}{c|}{\code{uint16}} &
      \multicolumn{1}{c|}{\code{uint32}} &
      \multicolumn{1}{c|}{\code{float}} &
      \multicolumn{1}{c}{\code{double}} \\

      \hline\extraheadingsep
      \acronym{JPEG}  &  $\bullet$  &  $\bullet$  &  $\bullet$  &  $-$        &  $-$        &  $-$        &  $-$ \\
      \acronym{PNG}   &  $\bullet$  &  ?          &  $\bullet$  &  $\bullet$  &  $-$        &  $-$        &  $-$ \\
      \acronym{PNM}   &  ?          &  $-$        &  $\bullet$  &  $\bullet$  &  $\bullet$  &  $-$        &  $-$ \\
      \optional{\acronym{V}}\acronym{TIFF} &
      $\bullet$  &  $\bullet$  &  $\bullet$  &  $\bullet$  &  $\bullet$  &  $\bullet$  &  $\bullet$
    \end{tabular}
    \ifreferencemanual\end{maxipage}\fi

    \caption[Image formats and bit-depths]%
            {Bit-depths of selected image formats.  These are the
              maximum capabilities of the formats themselves, not
              \App's.  The ``Mask'' column indicates whether the
              format supports an image mask (alpha-channel), see also
              Chapter~\ref{sec:understanding-masks}.  Column
              ``Profile'' shows whether the image format allows for
              \acronym{ICC}-profiles to be included; see also
              Chapter~\ref{sec:color-spaces}.\label{tab:image-format-and-bit-depth}}
  \end{table}


\subsubsection[Builder]{Name Of Builder
  \label{sec:name-of-builder}
  \genidx{name of builder}
  \genidx{builder}
  \genidx{query!name of builder}
  \optidx{--show-signature}}

During building each \appcmd{} is automatically signed to give the
users an extra level of confidence that it was constructed by someone
that they can trust to get it right.  You can access this signature
with \sample{--show-signature} and \App{} prints something like

\begin{literal}
  Compiled on sgctrl03 by Walter Harriman on Wed, Dec 22 2004, 16:07:22 GMT-7.
\end{literal}

\noindent where machine name, person, and date-time depend on the
build.


\subsubsection[Compiler And Libraries]{Compiler And Libraries Used To Build
  \label{sec:compiler-and-libraries}
  \genidx{compiler}
  \genidx{libraries}
  \genidx{query!compiler}
  \genidx{query!libraries}
  \optidx{--show-software-components}}

Sometimes \appcmd{} refuses to start or runs into trouble because the
libraries supplied to it do not match the ones it was compiled with.
Option~\option{--show-software-components} can be helpful to diagnose
the problem in such cases, becaus it shows the version information of
\App's most important libraries as they identified themselves during
compile-time.

Furthermore the report reveals the compiler used to build \appcmd{}
along with the most important compiler extensions like, for example,
\acronym{OpenMP}.  Example~\fullref{ex:show-software-components} shows
such a report.

\begin{exemplar}[htbp]
  \centering
  \begin{terminal}
    \$ \app{} --show-software-components \\
    Compiler \\
    ~~g++ 4.9.1 \\
    ~~implementing OpenMP standard of 2013-7 \\
    ~~implementing Cilk version 2.0 \\
    ~~~~without support of "\_Cilk\_for" keyword \\
    ~ \\
    OpenCL APIs \\
    ~~1.0 \\
    ~~1.1 \\
    ~~1.2  \\
    ~ \\
    Libraries \\
    ~~Boost:~~~~~~1.55.0 \\
    ~~GSL:~~~~~~~~1.15 \\
    ~~Little CMS:~2.7.0 \\
    ~~Vigra:~~~~~~1.10.0
  \end{terminal}

  \caption[Output of \sample{\app{} --show-software-components}]%
          {Output of \appcmd{} when asked to reveal the compile that
            was used to build it along with the libraries it was
            linked against.\label{ex:show-software-components}}
\end{exemplar}


\subsection[Console Messages]{Console Messages
  \label{sec:console-messages}
  \genidx{console messages}
  \genidx{message!console}}

\App{} is meant to read several images ``montage'' them together and
finally write a single output image.  So, any console message either
serves the entertainment desire of the use or indicates a problem.

When \appcmd{} is instructed to (only) show information about its
configuration etc.\ (see Section~\fullref{sec:information-options})
this text goes to Standard Output.  \appcmd{} sends error and warning
messages to Standard Error.  Furthermore, these messages follow a
fixed format:
\begin{literal}\genidx{message!category}
  \app: \optional{\metavar{CATEGORY}:} \metavar{MESSAGE}
\end{literal}
\noindent where \metavar{CATEGORY} is

\begin{codelist}
  \genidx{message!category!error}%
\item[error:] A serious problem that sooner or later will lead to a
  program stop.  The result will definitely not be what the user wants
  -- including no output image at all, as \appcmd{} deletes corrupted
  or incomplete output images.

  Most messages drop category name~\sample{error} and plainly write
  \metavar{MESSAGE}:

  \begin{literal}
    enblend: input image "1.tif" does not have an alpha channel
  \end{literal}

  If an \sample{error} actually leads to a premature termination of
  \appcmd, it returns code~1\genidx{return code} to the operating
  system.  On successful termination the return code is 0.

  \genidx{message!category!warning}%
\item[warning:] A problem that forced \appcmd{} to take an alternate
  execution path or drop some assumptions about the input.

  \genidx{message!category!info}%
\item[info:] No problem, just a ``nice-to-know'' information for the
  user.

  \genidx{message!category!note}%
\item[note:] Not a standalone \metavar{CATEGORY}, but an additional
  exaplanation or help that sometimes trails a messages in one of the
  above categories.  Here is an example for \appcmd{}, where a
  \code{warning} gets augmented by a \code{note}:

  \begin{literal}
    enblend: warning: input images too small for coarse mask \\
    enblend: note: switching to fine mask
  \end{literal}

  \genidx{message!category!timing}%
\item[timing:] A measurement of the execution duration and thus a
  sub\hyp{}category of \code{info}.
\end{codelist}

\noindent Sadly, not all messages can be sorted in the category
scheme.

\begin{description}
\item[Debug Messages:] Though debug messages generally come devoid of
  a specific form the more civilized of them start each line with a
  plus sign~\sample{+}.  Example:

  \begin{literal}
    + checkpoint: leaving channel width alone
  \end{literal}

  \genidx{message!foreign sources}%
\item[Foreign Sources:] \appcmd{} depends on various foreign software
  components that issue their own messages.  Though we try to catch
  them and press them in the category scheme, some of them slip
  through.  The most prominent members are the notices of
  \uref{\hciiwrvigra}{\acronym{VIGRA}} as e.g.

  \begin{literal}
    enfuse: an exception occured \\
    enfuse: Precondition violation! \\
    \dots
  \end{literal}

  and \uref{\remotesensingorglibtiff}{LibTIFF}:

  \begin{literal}
    TIFFReadDirectory: Warning, img0001.tif: wrong data type 1 for "RichTIFFIPTC"; tag ignored.
  \end{literal}

  \genidx{message!should-never-happen@``should never happen''}%
\item[``Should-Never-Happen'':] An internal consistency check fails or
  a cautious routine detects a problem with its parameters and racks
  up the digital equivalent of a nervous breakdown.  Sometimes these
  messages end in the word~\sample{Aborted}.
  \begin{literal}
    terminate called after throwing an instance of '\dots' \\
    what(): \dots \\
    Aborted
  \end{literal}

  If the installation of \appcmd{} is correct, this type of message
  may warrant a bug report as explained in
  Appendix~\fullref{sec:bug-reports}.
\end{description}

In very unfortunate circumstances it can happen that \App{} quits
because of a problem, but does \emph{not} show any message.  The
output file then either does not exist or it is broken.  One known
reason is a so called out-of-memory situation, where the process needs
additional memory, but cannot allocate it and while terminating needs
even more memory so that the operating system wipes it out completely
where ever it then happens to be in its execution path.


\subsection[Environment Variables]{Environment Variables
  \label{sec:environment-variables}}

As small set of enviroment variables influence the execution of
\appcmd; all of them depend on \appcmd{} having been compiled with
certain features.  The hint ``(direct)'' indicates genuine variables
in \appcmd, whereas ``(implicit)'' denotes variables that control
libraries that are linked with \appcmd.

\begin{description}
  \genidx[\summarylocation]{environment variable}

  \newcommand*{\xitemspace}{\ifhevea~~\else\hspace{.667em}\fi}
  \renewcommand{\makelabel}[1]{\hspace{\labelsep}#1}

  \genidx{environment variable!CILK\_NWORKERS@\envvar{CILK\_NWORKERS}}%
  \gensee{CILK\_NWORKERS@\envvar{CILK\_NWORKERS}}{environment variable, \envvar{CILK\_NWORKERS}}%
\item[\envvar{CILK\_NWORKERS}\xitemspace (implicit)\xitemspace
  \restrictednote{\acronym{Cilk}-enabled versions only.}]\itemend This
  environment variable works for \uref{\cilkplusorg}{CilkPlus} as
  \envvar{OMP\_NUM\_THREADS} (see below) does for \acronym{OpenMP}.
  It can be helpful for load balancing.

  \genidx{environment variable!ENBLEND\_OPENCL\_PATH@\envvar{ENBLEND\_OPENCL\_PATH}}%
  \gensee{ENBLEND\_OPENCL\_PATH@\envvar{ENBLEND\_OPENCL\_PATH}}%
         {environment variable, \envvar{ENBLEND\_OPENCL\_PATH}}%
\item[\envvar{ENBLEND\_OPENCL\_PATH}\xitemspace (direct)\xitemspace
  \restrictednote{\acronym{OpenCL}-enabled versions only.}]\itemend
  Search path for \uref{\khronosorgopencl}{\acronym{OpenCL}}
  (\filename{.cl}) source files.  \appcmd{} will refuse to run if
  required \acronym{OpenCL}~files are missing, but can be convinced to
  start by resigning \acronym{OpenCL} with \sample{--no-gpu}.  If the
  compiled-in features (see
  Section~\fullref{sec:compiled-in-features}) do not show an
  \acronym{OpenCL} search path, \appcmd{} came with internal
  \acronym{OpenCL} sources and neither needs nor uses
  \envvar{ENBLEND\_OPENCL\_PATH}.

  Note that the environment variable is called
  \envvar{ENBLEND\_OPENCL\_PATH} for \emph{both} applications, even
  for \command{enfuse}!

  \genidx{environment variable!OMP\_DYNAMIC@\envvar{OMP\_DYNAMIC}}%
  \gensee{OMP\_DYNAMIC@\envvar{OMP\_DYNAMIC}}{environment variable, \envvar{OMP\_DYNAMIC}}%
\item[\envvar{OMP\_DYNAMIC}\xitemspace (implicit)\xitemspace
  \restrictednote{\acronym{OpenMP}-enabled versions only.}]\itemend
  Control whether the \uref{\openmporg}{\acronym{OpenMP}} sub-system
  should parallelize nested parallel regions.  This environment
  variable will only have an effect is the \acronym{OpenMP} sub-system
  is capable of dynamic adjustment of the number of threads (see
  explanations in Section~\fullref{sec:compiled-in-features}).  The
  important hot spots in the source code override the value of
  \envvar{OMP\_DYNAMIC}.

  \genidx{environment variable!OMP\_NUM\_THREADS@\envvar{OMP\_NUM\_THREADS}}%
  \gensee{OMP\_NUM\_THREADS@\envvar{OMP\_NUM\_THREADS}}%
         {environment variable, \envvar{OMP\_NUM\_THREADS}}%
\item[\envvar{OMP\_NUM\_THREADS}\xitemspace (implicit)\xitemspace
  \restrictednote{\acronym{OpenMP}-enabled versions only.}]\itemend
  Control -- which typically means: reduce -- the number of threads
  under supervision of the \uref{\openmporg}{\acronym{OpenMP}}
  sub-system.  By default \appcmd{} uses as many
  \acronym{OpenMP}\hyp{}threads as there are \acronym{CPU}s.  Use this
  variable for example to free some \acronym{CPU}s for other processes
  than \appcmd.

  \genidx{environment variable!TMPDIR@\envvar{TMPDIR}}%
  \gensee{TMPDIR@\envvar{TMPDIR}}{environment variable, \envvar{TMPDIR}}%
\item[\envvar{TMPDIR}\xitemspace (direct)\xitemspace
  \restrictednote{\sample{mmap\_view}-branch only.}]\itemend
  \envvar{TMPDIR} determines the directory and thus the volume where
  \appcmd{} stores all intermediate images.  The best choice follows
  the same rules as for a swap-drive: prefer the fasted disk with the
  least load.
\end{description}


%% \subsection[External Files]{External Files
%%   \label{sec:external-files}
%%   \genidx{external files}
%%   \genidx{files!external}}

\genidx[\rangeendlocation]{interaction with \App}
